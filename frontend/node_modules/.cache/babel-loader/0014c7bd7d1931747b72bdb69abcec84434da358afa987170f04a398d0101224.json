{"ast":null,"code":"// src/pages/PainelMedico/FilaDeAtendimento.jsx - VERSÃO CORRIGIDA\nimport React,{useState,useEffect}from'react';import{Typography,Paper,List,ListItem,ListItemText,CircularProgress,ListItemButton}from'@mui/material';import{agendamentoService}from'../../services/agendamentoService';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FilaDeAtendimento(_ref){let{onPacienteSelect}=_ref;const[agendamentos,setAgendamentos]=useState([]);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const fetchAgenda=async()=>{setIsLoading(true);try{const response=await agendamentoService.getMinhaAgenda();setAgendamentos(response.data);}catch(error){console.error(\"Erro ao buscar a agenda do médico:\",error);setAgendamentos([]);}finally{setIsLoading(false);}};fetchAgenda();},[]);return/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2,height:'100%',overflowY:'auto'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Fila de Atendimento\"}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24,sx:{display:'block',margin:'auto',mt:2}}):/*#__PURE__*/_jsx(List,{dense:true,children:agendamentos.length>0?agendamentos.map(ag=>/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsx(ListItemButton,{onClick:()=>onPacienteSelect(ag),children:/*#__PURE__*/_jsx(ListItemText,{primary:ag.paciente_nome,secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[new Date(ag.data_hora_inicio).toLocaleDateString('pt-BR'),' - ',new Date(ag.data_hora_inicio).toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Typography,{component:\"span\",variant:\"body2\",color:\"text.secondary\",children:ag.tipo_visita||'Consulta'})]})})})},ag.id)):/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Nenhum agendamento para hoje.\"})})})]});}","map":{"version":3,"names":["React","useState","useEffect","Typography","Paper","List","ListItem","ListItemText","CircularProgress","ListItemButton","agendamentoService","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","FilaDeAtendimento","_ref","onPacienteSelect","agendamentos","setAgendamentos","isLoading","setIsLoading","fetchAgenda","response","getMinhaAgenda","data","error","console","variant","sx","p","height","overflowY","children","gutterBottom","size","display","margin","mt","dense","length","map","ag","disablePadding","onClick","primary","paciente_nome","secondary","Date","data_hora_inicio","toLocaleDateString","toLocaleTimeString","hour","minute","component","color","tipo_visita","id"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/pages/PainelMedico/FilaDeAtendimento.jsx"],"sourcesContent":["// src/pages/PainelMedico/FilaDeAtendimento.jsx - VERSÃO CORRIGIDA\n\nimport React, { useState, useEffect } from 'react';\nimport { Typography, Paper, List, ListItem, ListItemText, CircularProgress, ListItemButton } from '@mui/material';\nimport { agendamentoService } from '../../services/agendamentoService';\n\nexport default function FilaDeAtendimento({ onPacienteSelect }) {\n    const [agendamentos, setAgendamentos] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchAgenda = async () => {\n            setIsLoading(true);\n            try {\n                const response = await agendamentoService.getMinhaAgenda();\n                setAgendamentos(response.data);\n            } catch (error) {\n                console.error(\"Erro ao buscar a agenda do médico:\", error);\n                setAgendamentos([]);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        fetchAgenda();\n    }, []);\n\n    return (\n        <Paper variant=\"outlined\" sx={{ p: 2, height: '100%', overflowY: 'auto' }}>\n            <Typography variant=\"h6\" gutterBottom>Fila de Atendimento</Typography>\n            {isLoading ? (\n                <CircularProgress size={24} sx={{ display: 'block', margin: 'auto', mt: 2 }} />\n            ) : (\n                <List dense>\n                    {agendamentos.length > 0 ? agendamentos.map(ag => (\n                        <ListItem key={ag.id} disablePadding>\n                            <ListItemButton onClick={() => onPacienteSelect(ag)}>\n                                <ListItemText \n                                    primary={ag.paciente_nome}\n                                    secondary={\n                                        <>\n                                            {new Date(ag.data_hora_inicio).toLocaleDateString('pt-BR')}\n                                            {' - '}\n                                            {new Date(ag.data_hora_inicio).toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}\n                                            <br />\n                                            <Typography component=\"span\" variant=\"body2\" color=\"text.secondary\">\n                                                {ag.tipo_visita || 'Consulta'}\n                                            </Typography>\n                                        </>\n                                    }\n                                />\n                            </ListItemButton>\n                        </ListItem>\n                    )) : (\n                        <ListItem>\n                            <ListItemText primary=\"Nenhum agendamento para hoje.\" />\n                        </ListItem>\n                    )}\n                </List>\n            )}\n        </Paper>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}