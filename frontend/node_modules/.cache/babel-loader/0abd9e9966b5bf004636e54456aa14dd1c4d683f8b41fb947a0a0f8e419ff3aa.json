{"ast":null,"code":"// src/pages/CategoriasDespesaPage.jsx\nimport React,{useState,useEffect,useCallback}from'react';import{Box,Typography,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,CircularProgress,Button,IconButton}from'@mui/material';import apiClient from'../api/axiosConfig';import{useSnackbar}from'../contexts/SnackbarContext';import EditIcon from'@mui/icons-material/Edit';import DeleteIcon from'@mui/icons-material/Delete';import CategoriaDespesaModal from'../components/configuracoes/CategoriaDespesaModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CategoriasDespesaPage(){const[categorias,setCategorias]=useState([]);const[isLoading,setIsLoading]=useState(true);const{showSnackbar}=useSnackbar();const[isModalOpen,setIsModalOpen]=useState(false);const[categoriaParaEditar,setCategoriaParaEditar]=useState(null);const fetchCategorias=useCallback(async()=>{try{const response=await apiClient.get('/faturamento/categorias-despesa/');setCategorias(response.data);}catch(error){showSnackbar('Erro ao carregar categorias.','error');}finally{setIsLoading(false);}},[showSnackbar]);useEffect(()=>{fetchCategorias();},[fetchCategorias]);const handleOpenModal=function(){let categoria=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setCategoriaParaEditar(categoria);setIsModalOpen(true);};const handleCloseModal=()=>{setIsModalOpen(false);setCategoriaParaEditar(null);};const handleDelete=async id=>{if(window.confirm('Tem certeza que deseja deletar esta categoria?')){try{await apiClient.delete(\"/faturamento/categorias-despesa/\".concat(id,\"/\"));showSnackbar('Categoria deletada com sucesso!','success');fetchCategorias();}catch(error){showSnackbar('Erro ao deletar categoria.','error');}}};if(isLoading)return/*#__PURE__*/_jsx(CircularProgress,{});return/*#__PURE__*/_jsxs(Paper,{sx:{p:2,margin:'auto'},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Categorias de Despesas\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>handleOpenModal(),children:\"Nova Categoria\"})]}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Nome\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:categorias.map(cat=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:cat.nome}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleOpenModal(cat),children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDelete(cat.id),children:/*#__PURE__*/_jsx(DeleteIcon,{color:\"error\"})})]})]},cat.id))})]})}),/*#__PURE__*/_jsx(CategoriaDespesaModal,{open:isModalOpen,onClose:handleCloseModal,onSave:fetchCategorias,categoriaParaEditar:categoriaParaEditar})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","CircularProgress","Button","IconButton","apiClient","useSnackbar","EditIcon","DeleteIcon","CategoriaDespesaModal","jsx","_jsx","jsxs","_jsxs","CategoriasDespesaPage","categorias","setCategorias","isLoading","setIsLoading","showSnackbar","isModalOpen","setIsModalOpen","categoriaParaEditar","setCategoriaParaEditar","fetchCategorias","response","get","data","error","handleOpenModal","categoria","arguments","length","undefined","handleCloseModal","handleDelete","id","window","confirm","delete","concat","sx","p","margin","children","display","justifyContent","alignItems","mb","variant","onClick","align","map","cat","hover","nome","color","open","onClose","onSave"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/pages/CategoriasDespesaPage.jsx"],"sourcesContent":["// src/pages/CategoriasDespesaPage.jsx\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Typography, Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, CircularProgress, Button, IconButton } from '@mui/material';\nimport apiClient from '../api/axiosConfig';\nimport { useSnackbar } from '../contexts/SnackbarContext';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CategoriaDespesaModal from '../components/configuracoes/CategoriaDespesaModal';\n\nexport default function CategoriasDespesaPage() {\n    const [categorias, setCategorias] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const { showSnackbar } = useSnackbar();\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [categoriaParaEditar, setCategoriaParaEditar] = useState(null);\n\n    const fetchCategorias = useCallback(async () => {\n        try {\n            const response = await apiClient.get('/faturamento/categorias-despesa/');\n            setCategorias(response.data);\n        } catch (error) {\n            showSnackbar('Erro ao carregar categorias.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [showSnackbar]);\n\n    useEffect(() => {\n        fetchCategorias();\n    }, [fetchCategorias]);\n\n    const handleOpenModal = (categoria = null) => {\n        setCategoriaParaEditar(categoria);\n        setIsModalOpen(true);\n    };\n\n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n        setCategoriaParaEditar(null);\n    };\n\n    const handleDelete = async (id) => {\n        if (window.confirm('Tem certeza que deseja deletar esta categoria?')) {\n            try {\n                await apiClient.delete(`/faturamento/categorias-despesa/${id}/`);\n                showSnackbar('Categoria deletada com sucesso!', 'success');\n                fetchCategorias();\n            } catch (error) {\n                showSnackbar('Erro ao deletar categoria.', 'error');\n            }\n        }\n    };\n\n    if (isLoading) return <CircularProgress />;\n\n    return (\n        <Paper sx={{ p: 2, margin: 'auto' }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                <Typography variant=\"h5\">Categorias de Despesas</Typography>\n                <Button variant=\"contained\" onClick={() => handleOpenModal()}>Nova Categoria</Button>\n            </Box>\n            <TableContainer>\n                <Table>\n                    <TableHead><TableRow><TableCell>Nome</TableCell><TableCell align=\"right\">Ações</TableCell></TableRow></TableHead>\n                    <TableBody>\n                        {categorias.map((cat) => (\n                            <TableRow key={cat.id} hover>\n                                <TableCell>{cat.nome}</TableCell>\n                                <TableCell align=\"right\">\n                                    <IconButton onClick={() => handleOpenModal(cat)}><EditIcon /></IconButton>\n                                    <IconButton onClick={() => handleDelete(cat.id)}><DeleteIcon color=\"error\" /></IconButton>\n                                </TableCell>\n                            </TableRow>\n                        ))}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            <CategoriaDespesaModal open={isModalOpen} onClose={handleCloseModal} onSave={fetchCategorias} categoriaParaEditar={categoriaParaEditar} />\n        </Paper>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}