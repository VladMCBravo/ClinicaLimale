{"ast":null,"code":"import _objectSpread from\"/Users/macmini/Documents/Sistema_Consultorio/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/prontuario/FormularioEvolucaoBase.jsx\nimport React,{useState}from'react';import{Box,Button,CircularProgress,Typography,Paper}from'@mui/material';import{useSnackbar}from'../../contexts/SnackbarContext';import apiClient from'../../api/axiosConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function FormularioEvolucaoBase(_ref){let{pacienteId,onEvolucaoSalva,titulo,children}=_ref;const[formData,setFormData]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const{showSnackbar}=useSnackbar();const handleChange=e=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[e.target.name]:e.target.value}));};const handleSubmit=async event=>{event.preventDefault();setIsSubmitting(true);try{await apiClient.post(\"/prontuario/pacientes/\".concat(pacienteId,\"/evolucoes/\"),formData);showSnackbar('Evolução salva com sucesso!','success');setFormData({});if(onEvolucaoSalva)onEvolucaoSalva();}catch(error){showSnackbar('Erro ao salvar evolução.','error');}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(Paper,{component:\"form\",onSubmit:handleSubmit,sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:titulo||'Evolução do Atendimento'}),React.Children.map(children,child=>/*#__PURE__*/React.cloneElement(child,{formData,handleChange})),/*#__PURE__*/_jsx(Box,{sx:{textAlign:'right',mt:2},children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:isSubmitting,children:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Salvar Evolução'})})]});}","map":{"version":3,"names":["React","useState","Box","Button","CircularProgress","Typography","Paper","useSnackbar","apiClient","jsx","_jsx","jsxs","_jsxs","FormularioEvolucaoBase","_ref","pacienteId","onEvolucaoSalva","titulo","children","formData","setFormData","isSubmitting","setIsSubmitting","showSnackbar","handleChange","e","prev","_objectSpread","target","name","value","handleSubmit","event","preventDefault","post","concat","error","component","onSubmit","sx","p","variant","gutterBottom","Children","map","child","cloneElement","textAlign","mt","type","disabled","size"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/components/prontuario/FormularioEvolucaoBase.jsx"],"sourcesContent":["// src/components/prontuario/FormularioEvolucaoBase.jsx\n\nimport React, { useState } from 'react';\nimport { Box, Button, CircularProgress, Typography, Paper } from '@mui/material';\nimport { useSnackbar } from '../../contexts/SnackbarContext';\nimport apiClient from '../../api/axiosConfig';\n\nexport default function FormularioEvolucaoBase({ pacienteId, onEvolucaoSalva, titulo, children }) {\n    const [formData, setFormData] = useState({});\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const { showSnackbar } = useSnackbar();\n\n    const handleChange = (e) => {\n        setFormData(prev => ({ ...prev, [e.target.name]: e.target.value }));\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        setIsSubmitting(true);\n        try {\n            await apiClient.post(`/prontuario/pacientes/${pacienteId}/evolucoes/`, formData);\n            showSnackbar('Evolução salva com sucesso!', 'success');\n            setFormData({}); \n            if(onEvolucaoSalva) onEvolucaoSalva();\n        } catch (error) {\n            showSnackbar('Erro ao salvar evolução.', 'error');\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <Paper component=\"form\" onSubmit={handleSubmit} sx={{ p: 2 }}>\n            <Typography variant=\"h6\" gutterBottom>{titulo || 'Evolução do Atendimento'}</Typography>\n            \n            {/* Mágica: Renderiza os \"cards\" que forem passados e injeta as props neles */}\n            {React.Children.map(children, child =>\n                React.cloneElement(child, { formData, handleChange })\n            )}\n\n            <Box sx={{ textAlign: 'right', mt: 2 }}>\n                <Button type=\"submit\" variant=\"contained\" disabled={isSubmitting}>\n                    {isSubmitting ? <CircularProgress size={24} /> : 'Salvar Evolução'}\n                </Button>\n            </Box>\n        </Paper>\n    );\n}"],"mappings":"0IAAA;AAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,GAAG,CAAEC,MAAM,CAAEC,gBAAgB,CAAEC,UAAU,CAAEC,KAAK,KAAQ,eAAe,CAChF,OAASC,WAAW,KAAQ,gCAAgC,CAC5D,MAAO,CAAAC,SAAS,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9C,cAAe,SAAS,CAAAC,sBAAsBA,CAAAC,IAAA,CAAoD,IAAnD,CAAEC,UAAU,CAAEC,eAAe,CAAEC,MAAM,CAAEC,QAAS,CAAC,CAAAJ,IAAA,CAC5F,KAAM,CAACK,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACoB,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAAEsB,YAAa,CAAC,CAAGhB,WAAW,CAAC,CAAC,CAEtC,KAAM,CAAAiB,YAAY,CAAIC,CAAC,EAAK,CACxBL,WAAW,CAACM,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE,CAACD,CAAC,CAACG,MAAM,CAACC,IAAI,EAAGJ,CAAC,CAACG,MAAM,CAACE,KAAK,EAAG,CAAC,CACvE,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CAClCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBX,eAAe,CAAC,IAAI,CAAC,CACrB,GAAI,CACA,KAAM,CAAAd,SAAS,CAAC0B,IAAI,0BAAAC,MAAA,CAA0BpB,UAAU,gBAAeI,QAAQ,CAAC,CAChFI,YAAY,CAAC,6BAA6B,CAAE,SAAS,CAAC,CACtDH,WAAW,CAAC,CAAC,CAAC,CAAC,CACf,GAAGJ,eAAe,CAAEA,eAAe,CAAC,CAAC,CACzC,CAAE,MAAOoB,KAAK,CAAE,CACZb,YAAY,CAAC,0BAA0B,CAAE,OAAO,CAAC,CACrD,CAAC,OAAS,CACND,eAAe,CAAC,KAAK,CAAC,CAC1B,CACJ,CAAC,CAED,mBACIV,KAAA,CAACN,KAAK,EAAC+B,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAEP,YAAa,CAACQ,EAAE,CAAE,CAAEC,CAAC,CAAE,CAAE,CAAE,CAAAtB,QAAA,eACzDR,IAAA,CAACL,UAAU,EAACoC,OAAO,CAAC,IAAI,CAACC,YAAY,MAAAxB,QAAA,CAAED,MAAM,EAAI,yBAAyB,CAAa,CAAC,CAGvFjB,KAAK,CAAC2C,QAAQ,CAACC,GAAG,CAAC1B,QAAQ,CAAE2B,KAAK,eAC/B7C,KAAK,CAAC8C,YAAY,CAACD,KAAK,CAAE,CAAE1B,QAAQ,CAAEK,YAAa,CAAC,CACxD,CAAC,cAEDd,IAAA,CAACR,GAAG,EAACqC,EAAE,CAAE,CAAEQ,SAAS,CAAE,OAAO,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAA9B,QAAA,cACnCR,IAAA,CAACP,MAAM,EAAC8C,IAAI,CAAC,QAAQ,CAACR,OAAO,CAAC,WAAW,CAACS,QAAQ,CAAE7B,YAAa,CAAAH,QAAA,CAC5DG,YAAY,cAAGX,IAAA,CAACN,gBAAgB,EAAC+C,IAAI,CAAE,EAAG,CAAE,CAAC,CAAG,iBAAiB,CAC9D,CAAC,CACR,CAAC,EACH,CAAC,CAEhB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}