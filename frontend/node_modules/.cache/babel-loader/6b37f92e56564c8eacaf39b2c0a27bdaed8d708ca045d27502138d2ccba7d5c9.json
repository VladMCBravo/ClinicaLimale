{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Paper,Typography,Box,List,ListItem,ListItemText,CircularProgress,Divider}from'@mui/material';import HistoryIcon from'@mui/icons-material/History';import apiClient from'../../api/axiosConfig';import{useSnackbar}from'../../contexts/SnackbarContext';// 1. IMPORTE O SNACKBAR\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function HistoricoConsultas(_ref){let{pacienteId}=_ref;const[evolucoes,setEvolucoes]=useState([]);const[isLoading,setIsLoading]=useState(true);const{showSnackbar}=useSnackbar();// 2. INICIALIZE O HOOK\nuseEffect(()=>{if(pacienteId){apiClient.get(\"/prontuario/pacientes/\".concat(pacienteId,\"/evolucoes/\")).then(res=>setEvolucoes(res.data)).catch(err=>{// MUDANÇA AQUI\nshowSnackbar('Erro ao buscar histórico de consultas.','error');console.error(\"Erro ao buscar histórico\",err);}).finally(()=>setIsLoading(false));}},[pacienteId,showSnackbar]);// 3. ADICIONE A DEPENDÊNCIA\nreturn/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(HistoryIcon,{color:\"action\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",sx:{fontWeight:'bold'},children:[\" \",\"Hist\\xF3rico de Consultas\"]})]}),/*#__PURE__*/_jsx(Divider,{}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{size:24,sx:{my:2}}):/*#__PURE__*/_jsx(List,{dense:true,children:evolucoes.length>0?evolucoes.map(ev=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Em \".concat(new Date(ev.data_atendimento).toLocaleDateString('pt-BR')),secondary:\"com Dr(a). \".concat(ev.medico)})},ev.id)):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mt:2},children:\"Nenhum registro anterior.\"})})]});}","map":{"version":3,"names":["React","useState","useEffect","Paper","Typography","Box","List","ListItem","ListItemText","CircularProgress","Divider","HistoryIcon","apiClient","useSnackbar","jsx","_jsx","jsxs","_jsxs","HistoricoConsultas","_ref","pacienteId","evolucoes","setEvolucoes","isLoading","setIsLoading","showSnackbar","get","concat","then","res","data","catch","err","console","error","finally","variant","sx","p","children","display","alignItems","gap","mb","color","fontWeight","size","my","dense","length","map","ev","primary","Date","data_atendimento","toLocaleDateString","secondary","medico","id","mt"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/components/prontuario/HistoricoConsultas.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Paper, Typography, Box, List, ListItem, ListItemText, CircularProgress, Divider } from '@mui/material';\nimport HistoryIcon from '@mui/icons-material/History';\nimport apiClient from '../../api/axiosConfig';\nimport { useSnackbar } from '../../contexts/SnackbarContext'; // 1. IMPORTE O SNACKBAR\n\nexport default function HistoricoConsultas({ pacienteId }) {\n    const [evolucoes, setEvolucoes] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const { showSnackbar } = useSnackbar(); // 2. INICIALIZE O HOOK\n\n    useEffect(() => {\n        if (pacienteId) {\n            apiClient.get(`/prontuario/pacientes/${pacienteId}/evolucoes/`)\n                .then(res => setEvolucoes(res.data))\n                .catch(err => {\n                    // MUDANÇA AQUI\n                    showSnackbar('Erro ao buscar histórico de consultas.', 'error');\n                    console.error(\"Erro ao buscar histórico\", err)\n                })\n                .finally(() => setIsLoading(false));\n        }\n    }, [pacienteId, showSnackbar]); // 3. ADICIONE A DEPENDÊNCIA\n\n    return (\n        <Paper variant=\"outlined\" sx={{ p: 2 }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\n    <HistoryIcon color=\"action\" />\n    <Typography variant=\"subtitle1\" sx={{ fontWeight: 'bold' }}> {/* <-- MUDANÇA AQUI */}\n        Histórico de Consultas\n    </Typography>\n</Box>\n            <Divider />\n            {isLoading ? <CircularProgress size={24} sx={{ my: 2 }} /> : (\n                <List dense>{evolucoes.length > 0 ? evolucoes.map(ev => (<ListItem key={ev.id}><ListItemText primary={`Em ${new Date(ev.data_atendimento).toLocaleDateString('pt-BR')}`} secondary={`com Dr(a). ${ev.medico}`} /></ListItem>)) : <Typography variant=\"body2\" sx={{ mt: 2 }}>Nenhum registro anterior.</Typography>}</List>\n            )}\n        </Paper>\n    );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,KAAK,CAAEC,UAAU,CAAEC,GAAG,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,YAAY,CAAEC,gBAAgB,CAAEC,OAAO,KAAQ,eAAe,CAC/G,MAAO,CAAAC,WAAW,KAAM,6BAA6B,CACrD,MAAO,CAAAC,SAAS,KAAM,uBAAuB,CAC7C,OAASC,WAAW,KAAQ,gCAAgC,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9D,cAAe,SAAS,CAAAC,kBAAkBA,CAAAC,IAAA,CAAiB,IAAhB,CAAEC,UAAW,CAAC,CAAAD,IAAA,CACrD,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACsB,SAAS,CAAEC,YAAY,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAAEwB,YAAa,CAAC,CAAGZ,WAAW,CAAC,CAAC,CAAE;AAExCX,SAAS,CAAC,IAAM,CACZ,GAAIkB,UAAU,CAAE,CACZR,SAAS,CAACc,GAAG,0BAAAC,MAAA,CAA0BP,UAAU,eAAa,CAAC,CAC1DQ,IAAI,CAACC,GAAG,EAAIP,YAAY,CAACO,GAAG,CAACC,IAAI,CAAC,CAAC,CACnCC,KAAK,CAACC,GAAG,EAAI,CACV;AACAP,YAAY,CAAC,wCAAwC,CAAE,OAAO,CAAC,CAC/DQ,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEF,GAAG,CAAC,CAClD,CAAC,CAAC,CACDG,OAAO,CAAC,IAAMX,YAAY,CAAC,KAAK,CAAC,CAAC,CAC3C,CACJ,CAAC,CAAE,CAACJ,UAAU,CAAEK,YAAY,CAAC,CAAC,CAAE;AAEhC,mBACIR,KAAA,CAACd,KAAK,EAACiC,OAAO,CAAC,UAAU,CAACC,EAAE,CAAE,CAAEC,CAAC,CAAE,CAAE,CAAE,CAAAC,QAAA,eACnCtB,KAAA,CAACZ,GAAG,EAACgC,EAAE,CAAE,CAAEG,OAAO,CAAE,MAAM,CAAEC,UAAU,CAAE,QAAQ,CAAEC,GAAG,CAAE,CAAC,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAJ,QAAA,eAC1ExB,IAAA,CAACJ,WAAW,EAACiC,KAAK,CAAC,QAAQ,CAAE,CAAC,cAC9B3B,KAAA,CAACb,UAAU,EAACgC,OAAO,CAAC,WAAW,CAACC,EAAE,CAAE,CAAEQ,UAAU,CAAE,MAAO,CAAE,CAAAN,QAAA,EAAC,GAAC,CAAwB,2BAErF,EAAY,CAAC,EACZ,CAAC,cACMxB,IAAA,CAACL,OAAO,GAAE,CAAC,CACVa,SAAS,cAAGR,IAAA,CAACN,gBAAgB,EAACqC,IAAI,CAAE,EAAG,CAACT,EAAE,CAAE,CAAEU,EAAE,CAAE,CAAE,CAAE,CAAE,CAAC,cACtDhC,IAAA,CAACT,IAAI,EAAC0C,KAAK,MAAAT,QAAA,CAAElB,SAAS,CAAC4B,MAAM,CAAG,CAAC,CAAG5B,SAAS,CAAC6B,GAAG,CAACC,EAAE,eAAKpC,IAAA,CAACR,QAAQ,EAAAgC,QAAA,cAAaxB,IAAA,CAACP,YAAY,EAAC4C,OAAO,OAAAzB,MAAA,CAAQ,GAAI,CAAA0B,IAAI,CAACF,EAAE,CAACG,gBAAgB,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAC,CAAG,CAACC,SAAS,eAAA7B,MAAA,CAAgBwB,EAAE,CAACM,MAAM,CAAG,CAAE,CAAC,EAAzIN,EAAE,CAACO,EAAgJ,CAAE,CAAC,cAAG3C,IAAA,CAACX,UAAU,EAACgC,OAAO,CAAC,OAAO,CAACC,EAAE,CAAE,CAAEsB,EAAE,CAAE,CAAE,CAAE,CAAApB,QAAA,CAAC,2BAAyB,CAAY,CAAC,CAAO,CAC5T,EACE,CAAC,CAEhB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}