{"ast":null,"code":"// src/pages/PainelRecepcaoPage.jsx - VERSÃO FINAL COM TUDO INTEGRADO\nimport React,{useState,useEffect}from'react';import{Box}from'@mui/material';import{agendamentoService}from'../services/agendamentoService';// Componentes do Painel\nimport AgendaPrincipal from'../components/agenda/AgendaPrincipal';import PacientesDoDiaSidebar from'../components/agenda/PacientesDoDiaSidebar';import ListaEspera from'../components/painel/ListaEspera';import ControlesAgenda from'../components/painel/ControlesAgenda';import BarraIconesLateral from'../components/painel/BarraIconesLateral';// Modais\nimport PacienteModal from'../components/PacienteModal';import AgendamentoModal from'../components/AgendamentoModal';import LancamentoCaixaModal from'../components/financeiro/LancamentoCaixaModal';// <-- IMPORTE O MODAL DE CAIXA\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PainelRecepcaoPage(){// ESTADOS GERAIS\nconst[refreshTrigger,setRefreshTrigger]=useState(0);const[salas,setSalas]=useState([]);const[medicoFiltro,setMedicoFiltro]=useState('');const[especialidadeFiltro,setEspecialidadeFiltro]=useState('');// ESTADOS DOS MODAIS\nconst[isPacienteModalOpen,setIsPacienteModalOpen]=useState(false);const[isAgendamentoModalOpen,setIsAgendamentoModalOpen]=useState(false);const[isCaixaModalOpen,setIsCaixaModalOpen]=useState(false);// <-- NOVO STATE\nconst[editingEvent,setEditingEvent]=useState(null);const[initialData,setInitialData]=useState(null);useEffect(()=>{agendamentoService.getSalas().then(res=>setSalas(res.data)).catch(err=>console.error(\"Falha ao buscar salas\",err));},[]);const forceRefresh=()=>setRefreshTrigger(prev=>prev+1);// Handlers para abrir/fechar modais\nconst handleCloseAgendamentoModal=()=>{setIsAgendamentoModalOpen(false);setEditingEvent(null);setInitialData(null);};const handleAgendamentoSave=()=>{handleCloseAgendamentoModal();forceRefresh();};const handleDateClick=arg=>{setEditingEvent(null);setInitialData({start:arg.date,resource:arg.resource});setIsAgendamentoModalOpen(true);};const handleEventClick=clickInfo=>{setInitialData(null);setEditingEvent(clickInfo.event||clickInfo);setIsAgendamentoModalOpen(true);};const handleFiltroChange=filtros=>{setMedicoFiltro(filtros.medicoId);setEspecialidadeFiltro(filtros.especialidadeId);};return/*#__PURE__*/_jsxs(Box,{sx:{height:'calc(100vh - 64px)',display:'flex',p:2,gap:2,backgroundColor:'#f4f6f8'},children:[/*#__PURE__*/_jsxs(Box,{sx:{width:350,flexShrink:0,display:'flex',flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(ControlesAgenda,{onNovoPacienteClick:()=>setIsPacienteModalOpen(true),onCaixaClick:()=>setIsCaixaModalOpen(true),onFiltroChange:handleFiltroChange}),/*#__PURE__*/_jsx(Box,{sx:{flex:1,minHeight:'300px'},children:/*#__PURE__*/_jsx(PacientesDoDiaSidebar,{refreshTrigger:refreshTrigger,medicoFiltro:medicoFiltro})}),/*#__PURE__*/_jsx(Box,{sx:{flex:1,minHeight:'200px'},children:/*#__PURE__*/_jsx(ListaEspera,{refreshTrigger:refreshTrigger,onAgendamentoSelect:handleEventClick})})]}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,minHeight:0,display:'flex'},children:/*#__PURE__*/_jsx(AgendaPrincipal,{medicoFiltro:medicoFiltro,especialidadeFiltro:especialidadeFiltro,onDateClick:handleDateClick,onEventClick:handleEventClick,salas:salas})}),/*#__PURE__*/_jsx(BarraIconesLateral,{}),/*#__PURE__*/_jsx(PacienteModal,{open:isPacienteModalOpen,onClose:()=>setIsPacienteModalOpen(false),onSave:()=>{setIsPacienteModalOpen(false);forceRefresh();},pacienteParaEditar:null}),/*#__PURE__*/_jsx(AgendamentoModal,{open:isAgendamentoModalOpen,onClose:handleCloseAgendamentoModal,onSave:handleAgendamentoSave,initialData:initialData,editingEvent:editingEvent}),/*#__PURE__*/_jsx(LancamentoCaixaModal,{open:isCaixaModalOpen,onClose:()=>setIsCaixaModalOpen(false)})]});}","map":{"version":3,"names":["React","useState","useEffect","Box","agendamentoService","AgendaPrincipal","PacientesDoDiaSidebar","ListaEspera","ControlesAgenda","BarraIconesLateral","PacienteModal","AgendamentoModal","LancamentoCaixaModal","jsx","_jsx","jsxs","_jsxs","PainelRecepcaoPage","refreshTrigger","setRefreshTrigger","salas","setSalas","medicoFiltro","setMedicoFiltro","especialidadeFiltro","setEspecialidadeFiltro","isPacienteModalOpen","setIsPacienteModalOpen","isAgendamentoModalOpen","setIsAgendamentoModalOpen","isCaixaModalOpen","setIsCaixaModalOpen","editingEvent","setEditingEvent","initialData","setInitialData","getSalas","then","res","data","catch","err","console","error","forceRefresh","prev","handleCloseAgendamentoModal","handleAgendamentoSave","handleDateClick","arg","start","date","resource","handleEventClick","clickInfo","event","handleFiltroChange","filtros","medicoId","especialidadeId","sx","height","display","p","gap","backgroundColor","children","width","flexShrink","flexDirection","onNovoPacienteClick","onCaixaClick","onFiltroChange","flex","minHeight","onAgendamentoSelect","flexGrow","onDateClick","onEventClick","open","onClose","onSave","pacienteParaEditar"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/pages/PainelRecepcaoPage.jsx"],"sourcesContent":["// src/pages/PainelRecepcaoPage.jsx - VERSÃO FINAL COM TUDO INTEGRADO\nimport React, { useState, useEffect } from 'react';\nimport { Box } from '@mui/material';\nimport { agendamentoService } from '../services/agendamentoService';\n\n// Componentes do Painel\nimport AgendaPrincipal from '../components/agenda/AgendaPrincipal';\nimport PacientesDoDiaSidebar from '../components/agenda/PacientesDoDiaSidebar';\nimport ListaEspera from '../components/painel/ListaEspera';\nimport ControlesAgenda from '../components/painel/ControlesAgenda';\nimport BarraIconesLateral from '../components/painel/BarraIconesLateral';\n\n// Modais\nimport PacienteModal from '../components/PacienteModal';\nimport AgendamentoModal from '../components/AgendamentoModal';\nimport LancamentoCaixaModal from '../components/financeiro/LancamentoCaixaModal'; // <-- IMPORTE O MODAL DE CAIXA\n\nexport default function PainelRecepcaoPage() {\n    // ESTADOS GERAIS\n    const [refreshTrigger, setRefreshTrigger] = useState(0);\n    const [salas, setSalas] = useState([]);\n    const [medicoFiltro, setMedicoFiltro] = useState('');\n    const [especialidadeFiltro, setEspecialidadeFiltro] = useState('');\n\n    // ESTADOS DOS MODAIS\n    const [isPacienteModalOpen, setIsPacienteModalOpen] = useState(false);\n    const [isAgendamentoModalOpen, setIsAgendamentoModalOpen] = useState(false);\n    const [isCaixaModalOpen, setIsCaixaModalOpen] = useState(false); // <-- NOVO STATE\n    const [editingEvent, setEditingEvent] = useState(null);\n    const [initialData, setInitialData] = useState(null);\n\n    useEffect(() => {\n        agendamentoService.getSalas().then(res => setSalas(res.data)).catch(err => console.error(\"Falha ao buscar salas\", err));\n    }, []);\n\n    const forceRefresh = () => setRefreshTrigger(prev => prev + 1);\n\n    // Handlers para abrir/fechar modais\n    const handleCloseAgendamentoModal = () => { setIsAgendamentoModalOpen(false); setEditingEvent(null); setInitialData(null); };\n    const handleAgendamentoSave = () => { handleCloseAgendamentoModal(); forceRefresh(); };\n    const handleDateClick = (arg) => { setEditingEvent(null); setInitialData({ start: arg.date, resource: arg.resource }); setIsAgendamentoModalOpen(true); };\n    const handleEventClick = (clickInfo) => { setInitialData(null); setEditingEvent(clickInfo.event || clickInfo); setIsAgendamentoModalOpen(true); };\n    const handleFiltroChange = (filtros) => { setMedicoFiltro(filtros.medicoId); setEspecialidadeFiltro(filtros.especialidadeId); };\n\n    return (\n        <Box sx={{ height: 'calc(100vh - 64px)', display: 'flex', p: 2, gap: 2, backgroundColor: '#f4f6f8' }}>\n            \n            <Box sx={{ width: 350, flexShrink: 0, display: 'flex', flexDirection: 'column', gap: 2 }}>\n                {/* Passa as funções para abrir os modais corretos */}\n                <ControlesAgenda \n                    onNovoPacienteClick={() => setIsPacienteModalOpen(true)}\n                    onCaixaClick={() => setIsCaixaModalOpen(true)}\n                    onFiltroChange={handleFiltroChange}\n                />\n                <Box sx={{ flex: 1, minHeight: '300px' }}><PacientesDoDiaSidebar refreshTrigger={refreshTrigger} medicoFiltro={medicoFiltro} /></Box>\n                <Box sx={{ flex: 1, minHeight: '200px' }}><ListaEspera refreshTrigger={refreshTrigger} onAgendamentoSelect={handleEventClick} /></Box>\n            </Box>\n\n            <Box sx={{ flexGrow: 1, minHeight: 0, display: 'flex' }}>\n                <AgendaPrincipal medicoFiltro={medicoFiltro} especialidadeFiltro={especialidadeFiltro} onDateClick={handleDateClick} onEventClick={handleEventClick} salas={salas} />\n            </Box>\n            \n            <BarraIconesLateral />\n            \n            {/* RENDERIZAÇÃO DE TODOS OS MODAIS CONTROLADOS PELA PÁGINA */}\n            <PacienteModal\n                open={isPacienteModalOpen}\n                onClose={() => setIsPacienteModalOpen(false)}\n                onSave={() => { setIsPacienteModalOpen(false); forceRefresh(); }}\n                pacienteParaEditar={null}\n            />\n            <AgendamentoModal\n                open={isAgendamentoModalOpen}\n                onClose={handleCloseAgendamentoModal}\n                onSave={handleAgendamentoSave}\n                initialData={initialData}\n                editingEvent={editingEvent}\n            />\n            <LancamentoCaixaModal\n                open={isCaixaModalOpen}\n                onClose={() => setIsCaixaModalOpen(false)}\n            />\n        </Box>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}