{"ast":null,"code":"// src/components/prontuario/EvolucoesTab.jsx - VERSÃO REATORADA\nimport React,{useState,useEffect,useCallback}from'react';import{Box,Typography,CircularProgress,Accordion,AccordionSummary,AccordionDetails}from'@mui/material';import ExpandMoreIcon from'@mui/icons-material/ExpandMore';import{useAuth}from'../../hooks/useAuth';import apiClient from'../../api/axiosConfig';import{useSnackbar}from'../../contexts/SnackbarContext';// Importe os formulários de atendimento que ele vai usar\nimport AtendimentoGeral from'./AtendimentoGeral';import AtendimentoCardiologia from'./AtendimentoCardiologia';import AtendimentoPediatria from'./AtendimentoPediatria';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EvolucoesTab(_ref){let{pacienteId}=_ref;const{showSnackbar}=useSnackbar();const{user}=useAuth();// Pega o usuário para saber a especialidade\nconst[evolucoes,setEvolucoes]=useState([]);const[isLoading,setIsLoading]=useState(true);const fetchEvolucoes=useCallback(async()=>{setIsLoading(true);try{const response=await apiClient.get(\"/prontuario/pacientes/\".concat(pacienteId,\"/evolucoes/\"));setEvolucoes(response.data);}catch(error){showSnackbar('Erro ao carregar histórico de evoluções.','error');}finally{setIsLoading(false);}},[pacienteId,showSnackbar]);useEffect(()=>{fetchEvolucoes();},[fetchEvolucoes]);// Função que decide qual formulário de atendimento renderizar\nconst renderAtendimentoForm=()=>{var _user$especialidades_,_user$especialidades_2;const especialidadePrincipal=user===null||user===void 0?void 0:(_user$especialidades_=user.especialidades_detalhes)===null||_user$especialidades_===void 0?void 0:(_user$especialidades_2=_user$especialidades_[0])===null||_user$especialidades_2===void 0?void 0:_user$especialidades_2.nome;switch(especialidadePrincipal){case'Cardiologia':return/*#__PURE__*/_jsx(AtendimentoCardiologia,{pacienteId:pacienteId,onEvolucaoSalva:fetchEvolucoes,especialidade:especialidadePrincipal});// ▼▼▼ ADICIONE O NOVO CASO AQUI ▼▼▼\ncase'Pediatria':return/*#__PURE__*/_jsx(AtendimentoPediatria,{pacienteId:pacienteId,onEvolucaoSalva:fetchEvolucoes});default:return/*#__PURE__*/_jsx(AtendimentoGeral,{pacienteId:pacienteId,onEvolucaoSalva:fetchEvolucoes});}};return/*#__PURE__*/_jsxs(Box,{children:[renderAtendimentoForm(),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,sx:{mt:4},children:\"Hist\\xF3rico de Evolu\\xE7\\xF5es\"}),isLoading?/*#__PURE__*/_jsx(CircularProgress,{}):evolucoes.length>0?evolucoes.map(evolucao=>/*#__PURE__*/_jsxs(Accordion,{children:[/*#__PURE__*/_jsxs(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),children:[/*#__PURE__*/_jsx(Typography,{sx:{width:'33%',flexShrink:0},children:new Date(evolucao.data_atendimento).toLocaleDateString('pt-BR')}),/*#__PURE__*/_jsxs(Typography,{sx:{color:'text.secondary'},children:[\"Dr(a). \",evolucao.medico_nome]})]}),/*#__PURE__*/_jsx(AccordionDetails,{})]},evolucao.id)):/*#__PURE__*/_jsx(Typography,{children:\"Nenhuma evolu\\xE7\\xE3o registrada para este paciente.\"})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","Box","Typography","CircularProgress","Accordion","AccordionSummary","AccordionDetails","ExpandMoreIcon","useAuth","apiClient","useSnackbar","AtendimentoGeral","AtendimentoCardiologia","AtendimentoPediatria","jsx","_jsx","jsxs","_jsxs","EvolucoesTab","_ref","pacienteId","showSnackbar","user","evolucoes","setEvolucoes","isLoading","setIsLoading","fetchEvolucoes","response","get","concat","data","error","renderAtendimentoForm","_user$especialidades_","_user$especialidades_2","especialidadePrincipal","especialidades_detalhes","nome","onEvolucaoSalva","especialidade","children","variant","gutterBottom","sx","mt","length","map","evolucao","expandIcon","width","flexShrink","Date","data_atendimento","toLocaleDateString","color","medico_nome","id"],"sources":["/Users/macmini/Documents/Sistema_Consultorio/frontend/src/components/prontuario/EvolucoesTab.jsx"],"sourcesContent":["// src/components/prontuario/EvolucoesTab.jsx - VERSÃO REATORADA\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Typography, CircularProgress, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport { useAuth } from '../../hooks/useAuth';\nimport apiClient from '../../api/axiosConfig';\nimport { useSnackbar } from '../../contexts/SnackbarContext';\n\n// Importe os formulários de atendimento que ele vai usar\nimport AtendimentoGeral from './AtendimentoGeral';\nimport AtendimentoCardiologia from './AtendimentoCardiologia';\nimport AtendimentoPediatria from './AtendimentoPediatria'; \n\nexport default function EvolucoesTab({ pacienteId }) {\n    const { showSnackbar } = useSnackbar();\n    const { user } = useAuth(); // Pega o usuário para saber a especialidade\n    const [evolucoes, setEvolucoes] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    const fetchEvolucoes = useCallback(async () => {\n        setIsLoading(true);\n        try {\n            const response = await apiClient.get(`/prontuario/pacientes/${pacienteId}/evolucoes/`);\n            setEvolucoes(response.data);\n        } catch (error) {\n            showSnackbar('Erro ao carregar histórico de evoluções.', 'error');\n        } finally {\n            setIsLoading(false);\n        }\n    }, [pacienteId, showSnackbar]);\n\n    useEffect(() => {\n        fetchEvolucoes();\n    }, [fetchEvolucoes]);\n\n    // Função que decide qual formulário de atendimento renderizar\n        const renderAtendimentoForm = () => {\n        const especialidadePrincipal = user?.especialidades_detalhes?.[0]?.nome;\n\n        switch (especialidadePrincipal) {\n            case 'Cardiologia':\n                return <AtendimentoCardiologia pacienteId={pacienteId} onEvolucaoSalva={fetchEvolucoes} especialidade={especialidadePrincipal} />;\n            \n            // ▼▼▼ ADICIONE O NOVO CASO AQUI ▼▼▼\n            case 'Pediatria':\n                return <AtendimentoPediatria pacienteId={pacienteId} onEvolucaoSalva={fetchEvolucoes} />;\n\n            default:\n                return <AtendimentoGeral pacienteId={pacienteId} onEvolucaoSalva={fetchEvolucoes} />;\n        }\n    };\n    return (\n        <Box>\n            {/* O formulário de atendimento agora é renderizado aqui */}\n            {renderAtendimentoForm()}\n\n            <Typography variant=\"h6\" gutterBottom sx={{ mt: 4 }}>\n                Histórico de Evoluções\n            </Typography>\n            {isLoading ? <CircularProgress /> : (\n                evolucoes.length > 0 ? (\n                    evolucoes.map(evolucao => (\n                        <Accordion key={evolucao.id}>\n                            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                                <Typography sx={{ width: '33%', flexShrink: 0 }}>\n                                    {new Date(evolucao.data_atendimento).toLocaleDateString('pt-BR')}\n                                </Typography>\n                                <Typography sx={{ color: 'text.secondary' }}>Dr(a). {evolucao.medico_nome}</Typography>\n                            </AccordionSummary>\n                            <AccordionDetails>\n                                {/* Detalhes da evolução (S.O.A.P.) */}\n                            </AccordionDetails>\n                        </Accordion>\n                    ))\n                ) : (\n                    <Typography>Nenhuma evolução registrada para este paciente.</Typography>\n                )\n            )}\n        </Box>\n    );\n}"],"mappings":"AAAA;AAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,GAAG,CAAEC,UAAU,CAAEC,gBAAgB,CAAEC,SAAS,CAAEC,gBAAgB,CAAEC,gBAAgB,KAAQ,eAAe,CAChH,MAAO,CAAAC,cAAc,KAAM,gCAAgC,CAC3D,OAASC,OAAO,KAAQ,qBAAqB,CAC7C,MAAO,CAAAC,SAAS,KAAM,uBAAuB,CAC7C,OAASC,WAAW,KAAQ,gCAAgC,CAE5D;AACA,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,CAAAC,sBAAsB,KAAM,0BAA0B,CAC7D,MAAO,CAAAC,oBAAoB,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1D,cAAe,SAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAiB,IAAhB,CAAEC,UAAW,CAAC,CAAAD,IAAA,CAC/C,KAAM,CAAEE,YAAa,CAAC,CAAGX,WAAW,CAAC,CAAC,CACtC,KAAM,CAAEY,IAAK,CAAC,CAAGd,OAAO,CAAC,CAAC,CAAE;AAC5B,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC2B,SAAS,CAAEC,YAAY,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAEhD,KAAM,CAAA6B,cAAc,CAAG3B,WAAW,CAAC,SAAY,CAC3C0B,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACA,KAAM,CAAAE,QAAQ,CAAG,KAAM,CAAAnB,SAAS,CAACoB,GAAG,0BAAAC,MAAA,CAA0BV,UAAU,eAAa,CAAC,CACtFI,YAAY,CAACI,QAAQ,CAACG,IAAI,CAAC,CAC/B,CAAE,MAAOC,KAAK,CAAE,CACZX,YAAY,CAAC,0CAA0C,CAAE,OAAO,CAAC,CACrE,CAAC,OAAS,CACNK,YAAY,CAAC,KAAK,CAAC,CACvB,CACJ,CAAC,CAAE,CAACN,UAAU,CAAEC,YAAY,CAAC,CAAC,CAE9BtB,SAAS,CAAC,IAAM,CACZ4B,cAAc,CAAC,CAAC,CACpB,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpB;AACI,KAAM,CAAAM,qBAAqB,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAAAC,sBAAA,CACpC,KAAM,CAAAC,sBAAsB,CAAGd,IAAI,SAAJA,IAAI,kBAAAY,qBAAA,CAAJZ,IAAI,CAAEe,uBAAuB,UAAAH,qBAAA,kBAAAC,sBAAA,CAA7BD,qBAAA,CAAgC,CAAC,CAAC,UAAAC,sBAAA,iBAAlCA,sBAAA,CAAoCG,IAAI,CAEvE,OAAQF,sBAAsB,EAC1B,IAAK,aAAa,CACd,mBAAOrB,IAAA,CAACH,sBAAsB,EAACQ,UAAU,CAAEA,UAAW,CAACmB,eAAe,CAAEZ,cAAe,CAACa,aAAa,CAAEJ,sBAAuB,CAAE,CAAC,CAErI;AACA,IAAK,WAAW,CACZ,mBAAOrB,IAAA,CAACF,oBAAoB,EAACO,UAAU,CAAEA,UAAW,CAACmB,eAAe,CAAEZ,cAAe,CAAE,CAAC,CAE5F,QACI,mBAAOZ,IAAA,CAACJ,gBAAgB,EAACS,UAAU,CAAEA,UAAW,CAACmB,eAAe,CAAEZ,cAAe,CAAE,CAAC,CAC5F,CACJ,CAAC,CACD,mBACIV,KAAA,CAAChB,GAAG,EAAAwC,QAAA,EAECR,qBAAqB,CAAC,CAAC,cAExBlB,IAAA,CAACb,UAAU,EAACwC,OAAO,CAAC,IAAI,CAACC,YAAY,MAACC,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAJ,QAAA,CAAC,iCAErD,CAAY,CAAC,CACZhB,SAAS,cAAGV,IAAA,CAACZ,gBAAgB,GAAE,CAAC,CAC7BoB,SAAS,CAACuB,MAAM,CAAG,CAAC,CAChBvB,SAAS,CAACwB,GAAG,CAACC,QAAQ,eAClB/B,KAAA,CAACb,SAAS,EAAAqC,QAAA,eACNxB,KAAA,CAACZ,gBAAgB,EAAC4C,UAAU,cAAElC,IAAA,CAACR,cAAc,GAAE,CAAE,CAAAkC,QAAA,eAC7C1B,IAAA,CAACb,UAAU,EAAC0C,EAAE,CAAE,CAAEM,KAAK,CAAE,KAAK,CAAEC,UAAU,CAAE,CAAE,CAAE,CAAAV,QAAA,CAC3C,GAAI,CAAAW,IAAI,CAACJ,QAAQ,CAACK,gBAAgB,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAC,CACxD,CAAC,cACbrC,KAAA,CAACf,UAAU,EAAC0C,EAAE,CAAE,CAAEW,KAAK,CAAE,gBAAiB,CAAE,CAAAd,QAAA,EAAC,SAAO,CAACO,QAAQ,CAACQ,WAAW,EAAa,CAAC,EACzE,CAAC,cACnBzC,IAAA,CAACT,gBAAgB,GAEC,CAAC,GATP0C,QAAQ,CAACS,EAUd,CACd,CAAC,cAEF1C,IAAA,CAACb,UAAU,EAAAuC,QAAA,CAAC,uDAA+C,CAAY,CAE9E,EACA,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}