{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Prescrição Médica</title>
    <style>
        @page {
            size: A4;
            margin: 1.5cm;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: 12pt;
            color: #333;
        }
        /* ESTILOS DO NOVO CABEÇALHO COM TABELA */
        .header-table {
            width: 100%;
            border-bottom: 2px solid #005A8D;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .logo-cell {
            width: 40%;
            vertical-align: top;
        }
        .info-cell {
            width: 60%;
            text-align: right;
            vertical-align: top;
        }
        .logo {
            /* Definimos uma largura fixa para melhor controle */
            width: 160px; 
        }
        .clinic-info h2 {
            margin: 0;
            color: #005A8D;
        }
        .clinic-info p {
            margin: 2px 0;
            font-size: 10pt;
        }
        /* FIM DOS ESTILOS DO NOVO CABEÇALHO */

        .section-title {
            color: #005A8D;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 14pt;
        }
        .patient-info p, .prescription-item p {
            margin: 5px 0;
        }
        .prescription-item {
            margin-bottom: 20px;
        }
        .footer {
            position: fixed;
            bottom: 0;
            left: 1.5cm;
            right: 1.5cm;
            text-align: center;
            font-size: 10pt;
        }
        .signature-line {
            border-top: 1px solid #333;
            width: 250px;
            margin: 50px auto 5px auto;
            padding-top: 5px;
        }
    </style>
</head>
<body>

    <table class="header-table">
        <tr>
            <td class="logo-cell">
                <img src="{{ logo_path }}" class="logo">
            </td>
            <td class="info-cell">
                <div class="clinic-info">
                    <h2>Clínica Limale</h2>
                    <p>Rua Exemplo, 123 - Bairro, Cidade - SP</p>
                    <p>Telefone: (11) 99999-9999</p>
                    <p>email@clinicalimale.com.br</p>
                </div>
            </td>
        </tr>
    </table>
    <h1 style="text-align: center; color: #333; font-size: 18pt;">Prescrição Médica</h1>

    <div class="patient-info">
        <h3 class="section-title">Paciente</h3>
        <p><strong>Nome:</strong> {{ prescricao.paciente.nome_completo }}</p>
        <p><strong>Data da Prescrição:</strong> {{ prescricao.data_prescricao|date:"d de F de Y" }}</p>
    </div>

    <div class="prescription-content">
        <h3 class="section-title">Medicamentos</h3>
        {% for item in prescricao.itens.all %}
            <div class="prescription-item">
                <p style="font-size: 14pt;"><strong>1) {{ item.medicamento }} - {{ item.dosagem }}</strong></p>
                <p style="padding-left: 20px;"><i>Uso: {{ item.instrucoes }}</i></p>
            </div>
        {% endfor %}
    </div>

    <div class="footer">
        <div class="signature-line">
            Dr(a). {{ prescricao.medico.first_name }} {{ prescricao.medico.last_name }}
        </div>
        <div>CRM/SP: 123456</div>
    </div>

</body>
</html>